import{d as s,_ as m}from"./index-Fq9V3qkZ.js";s({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:async(e,t)=>{const n=await m(()=>import("./frame-CAuxM5rD.js"),[],import.meta.url),a=Object.fromEntries(new e(window.location.hash.slice(1)).entries()),[u,i]=a.origin?.split("://")||[],o={protocol:"http",site:"wiki.dbbs.co",query:"Apparatus"};let l=r=>r;if(i){let r=function(d){return p=>{p.preventDefault(),n.link(d,p.shiftKey)}};o.protocol=u,o.site=i,o.query="",l=d=>t`<a href="#" data-title="${d}" onclick=${r(d)}>${d}</a>`}return{frame:n,frameInfo:a,frameProtocol:u,frameOrigin:i,defaults:o,formatTitle:l}},inputs:["URLSearchParams","html"],outputs:["frame","frameInfo","frameProtocol","frameOrigin","defaults","formatTitle"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:(e,t,n,a)=>({site:e(t.form({protocol:t.radio(["http","https"],{value:n.protocol}),domain:t.text({value:n.site,submit:!0,width:80})},{template:({protocol:i,domain:o})=>a`
   <div style="display: flex; flex-direction: cols;">
     ${i}
     ${o}
   </div>`}))}),inputs:["view","Inputs","defaults","html"],outputs:["site"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-4"),expanded:[],variables:[]},{id:4,body:e=>({sitemapUrl:new URL(`${e.protocol}://${e.domain}/system/sitemap.json`)}),inputs:["site"],outputs:["sitemapUrl"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-5"),expanded:[],variables:[]},{id:5,body:e=>({sitemap:fetch(e).then(n=>n.json()).then(n=>n.map(a=>(a.date=new Date(a.date),a))).catch(n=>[{error:n}])}),inputs:["sitemapUrl"],outputs:["sitemap"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-7"),expanded:[],variables:[]},{id:7,body:async(e,t,n,a)=>({results:e(t.search(await n,{query:a.query}))}),inputs:["view","Inputs","sitemap","defaults"],outputs:["results"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(e,t,n,a)=>({selection:e(t.table(n,{columns:["title","date"],format:{title:a},value:n.reduce((i,o)=>o.date>i.date?o:i,{date:new Date(0)}),header:{title:"pages in sitemap"},sort:"date",reverse:!0,multiple:!1}))}),inputs:["view","Inputs","results","formatTitle"],outputs:["selection"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-9"),expanded:[],variables:[]},{id:9,body:async(e,t,n,a)=>{const u=(await e)?.slug,i=new URL(`/${u}.json`,t),o=fetch(i).then(d=>d.json()).catch(d=>{}),l=new URL(`${n.protocol}://query.search.federatedwiki.org/search`);l.searchParams.set("find","links"),l.searchParams.set("within","pages"),l.searchParams.set("match","and"),l.searchParams.set("query",u);const r=a`<div><em>...searching...</em>`;return fetch(l).then(d=>d.json()).then(d=>{const p=d.results;r.innerHTML=p||"<em>No links found in the wider federation.</em>"}).catch(d=>r.append(a`${d}`)),{slug:u,pageUrl:i,page:o,fedwikisearchUrl:l,linksDiv:r}},inputs:["selection","sitemapUrl","site","html"],outputs:["slug","pageUrl","page","fedwikisearchUrl","linksDiv"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(e,t)=>e`   ---
   3. Any local links to ${t.title}?`,inputs:["md","selection"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:!1,automutable:void 0});s({root:document.getElementById("cell-11"),expanded:[],variables:[]},{id:11,body:async(e,t)=>(await e,{backlinks:t.reduce((a,u)=>(u.links&&u.links[e?.slug]&&a.add(u),a),new Set)}),inputs:["selection","sitemap"],outputs:["backlinks"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-12"),expanded:[],variables:[]},{id:12,body:(e,t,n,a)=>{e(t.table(n,{columns:["title","date"],header:{title:"backlinks"},format:{title:a},sort:"date",reverse:!0,rows:5.5}))},inputs:["view","Inputs","backlinks","formatTitle"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-13"),expanded:[],variables:[]},{id:13,body:(e,t)=>e`   ---
   4. Any federation links to ${t.title}?`,inputs:["md","selection"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:!1,automutable:void 0});s({root:document.getElementById("cell-14"),expanded:[],variables:[]},{id:14,body:(e,t)=>{e(t)},inputs:["display","linksDiv"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-16"),expanded:[],variables:[]},{id:16,body:async(e,t,n)=>{const a=(await e).map(i=>i.title),u=t(n.text({datalist:a}));return{datalist:a,title:u}},inputs:["sitemap","view","Inputs"],outputs:["datalist","title"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-17"),expanded:[],variables:[]},{id:17,body:(e,t,n,a,u,i,o,l)=>{function r(f){f.preventDefault();const c=f.currentTarget;e.includes(t)?c.value="A page with that name already exists.":(c.value="",n.open({...a,title:t},f.shiftKey)),c.dispatchEvent(new u("update"),{bubbles:!0})}const d=i`<button onclick=${r}>Preview</button>`,p=o.input(d);return l(d),{preview:r,previewButton:d,errorMessage:p}},inputs:["datalist","title","frame","page","Event","html","Generators","view"],outputs:["preview","previewButton","errorMessage"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});s({root:document.getElementById("cell-18"),expanded:[],variables:[]},{id:18,body:(e,t,n)=>{e(t`<div style="color:red;">${n}`)},inputs:["display","html","errorMessage"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});
